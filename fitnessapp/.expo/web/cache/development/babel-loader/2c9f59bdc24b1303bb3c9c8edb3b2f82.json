{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Auth } from \"aws-amplify\";\nimport { User } from \"../../models\";\nimport { DataStore } from '@aws-amplify/datastore';\nimport _ from \"lodash\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport CustomInput from \"../../componets/CustomInput\";\nimport CustomButton from \"../../componets/CustomButton\";\nimport RnIncrementDecrementBtn from 'react-native-increment-decrement-button';\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar UserProfileScreen = function UserProfileScreen() {\n  var navigation = useNavigation();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loaded = _useState2[0],\n      setLoaded = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      data = _useState4[0],\n      setData = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      height = _useState6[0],\n      setHeight = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      weight = _useState8[0],\n      setWeight = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      gender = _useState10[0],\n      setGender = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      numberofexe = _useState12[0],\n      setNumberOfExe = _useState12[1];\n\n  var currUser;\n  var username_;\n  var height_;\n  var weight_;\n  var gender_;\n  var numEx;\n  useEffect(function () {\n    setData(DataStore.query(User, function (u) {\n      return u.username(\"eq\", username_);\n    }).finally(function () {\n      return setLoaded(true);\n    }));\n  });\n\n  var loadData = function loadData() {\n    return _regeneratorRuntime.async(function loadData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(Auth.Credentials.Auth.user.username);\n            username_ = Auth.Credentials.Auth.user.username;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(DataStore.query(User, function (u) {\n              return u.username(\"eq\", username_);\n            }));\n\n          case 4:\n            currUser = _context.sent;\n            console.log(currUser);\n            height_ = data.height;\n            weight_ = data.weight;\n            gender_ = data.gender;\n            numEx = data.numberOfPreferedExercises;\n            setLoaded(true);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var saveChanges = function saveChanges() {\n    var tempheight, tempweight, tempexe;\n    return _regeneratorRuntime.async(function saveChanges$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            tempheight = 0;\n            tempheight = height.valueOf();\n            tempweight = 0;\n            tempweight = weight.valueOf();\n            tempexe = 0;\n            tempexe = numberofexe.valueOf();\n            _context2.next = 8;\n            return _regeneratorRuntime.awrap(DataStore.save(User.copyOf(currUser[0], function (updated) {\n              updated.height = Number(tempheight);\n              updated.weight = Number(tempweight);\n              updated.gender = gender;\n              updated.numberOfPreferedExercises = Number(tempexe);\n            })));\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var signOut = function signOut() {\n    Auth.signOut();\n  };\n\n  var GoToHomePage = function GoToHomePage() {\n    setLoaded(false);\n    navigation.navigate('Home');\n  };\n\n  if (loaded == true) {\n    return _jsx(ScrollView, {\n      showsVerticalScrollIndicator: false,\n      children: _jsxs(View, {\n        style: styles.root,\n        children: [_jsxs(Text, {\n          style: [styles.title],\n          children: [username_, \"'s Profile\"]\n        }), _jsx(Text, {\n          style: [styles.text],\n          children: \"Height (cm)\"\n        }), _jsx(CustomInput, {\n          placeholder: height_,\n          value: height,\n          setValue: setHeight\n        }), _jsx(Text, {\n          style: [styles.text],\n          children: \"Weight (lb)\"\n        }), _jsx(CustomInput, {\n          placeholder: weight_,\n          value: weight,\n          setValue: setWeight\n        }), _jsx(Text, {\n          style: [styles.text],\n          children: \"Gender\"\n        }), _jsx(CustomInput, {\n          placeholder: gender_,\n          value: gender,\n          setValue: setGender\n        }), _jsx(Text, {\n          style: [styles.text],\n          children: \"Number of exercises per day\"\n        }), _jsx(CustomInput, {\n          placeholder: numEx,\n          value: numberofexe,\n          setValue: setNumberOfExe\n        }), _jsx(CustomButton, {\n          onPress: saveChanges,\n          text: \"Save changes to profile\"\n        }), _jsx(CustomButton, {\n          onPress: GoToHomePage,\n          text: \"Go To Homepage\"\n        }), _jsx(CustomButton, {\n          onPress: signOut,\n          text: \"Sign Out\",\n          bgColor: \"#E3242B\"\n        })]\n      })\n    });\n  }\n\n  return _jsx(View, {\n    children: _jsx(Text, {\n      children: \"Loading...\"\n    })\n  });\n};\n\nvar styles = StyleSheet.create({\n  root: {\n    alignItems: 'center',\n    padding: 20\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#051C60',\n    margin: 10\n  },\n  text: {\n    fontSize: 14,\n    color: 'gray',\n    marginVertical: 10,\n    fontWeight: 'bold'\n  }\n});\nexport default UserProfileScreen;","map":{"version":3,"sources":["C:/Users/spart/Desktop/Capstone/NewApp/React App/fitnessapp/src/screens/UserProfileScreen/UserProfileScreen.js"],"names":["React","useState","useEffect","Auth","User","DataStore","_","useNavigation","CustomInput","CustomButton","RnIncrementDecrementBtn","UserProfileScreen","navigation","loaded","setLoaded","data","setData","height","setHeight","weight","setWeight","gender","setGender","numberofexe","setNumberOfExe","currUser","username_","height_","weight_","gender_","numEx","query","u","username","finally","loadData","console","log","Credentials","user","numberOfPreferedExercises","saveChanges","tempheight","valueOf","tempweight","tempexe","save","copyOf","updated","Number","signOut","GoToHomePage","navigate","styles","root","title","text","StyleSheet","create","alignItems","padding","fontSize","fontWeight","color","margin","marginVertical"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from \"react\";\r\nimport {View, Text, TouchableOpacity, Alert, ActivityIndicator, StyleSheet, ScrollView} from 'react-native'\r\nimport {Auth} from \"aws-amplify\"\r\nimport {User} from '../../models';\r\nimport { DataStore } from '@aws-amplify/datastore';\r\n\r\nimport _ from \"lodash\"\r\n\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport CustomInput from \"../../componets/CustomInput\";\r\nimport CustomButton from \"../../componets/CustomButton\";\r\nimport RnIncrementDecrementBtn  from 'react-native-increment-decrement-button';\r\n\r\n\r\n\r\nconst UserProfileScreen = () => {\r\n    const navigation = useNavigation();\r\n    const [loaded, setLoaded] = useState(false)\r\n    const [data, setData] = useState([]);\r\n\r\n    const [height, setHeight] = useState('');\r\n    const [weight, setWeight] = useState('');\r\n    const [gender, setGender] = useState('');\r\n    const [numberofexe, setNumberOfExe] = useState('');\r\n    //create user object and load data\r\n    let currUser;\r\n    let username_;\r\n    let height_ ;\r\n    let weight_ ;\r\n    let gender_; \r\n    let numEx;\r\n\r\n    useEffect(() => {\r\n\r\n        setData(DataStore.query(User,  u => u.username(\"eq\", username_)).finally(() => setLoaded(true)))\r\n\r\n    })\r\n\r\n    const loadData = async ()=> {  \r\n\r\n    console.log(Auth.Credentials.Auth.user.username);\r\n    username_ = Auth.Credentials.Auth.user.username;\r\n\r\n    currUser = await DataStore.query(User,  u => u.username(\"eq\", username_)); \r\n    console.log(currUser)\r\n    height_ = data.height\r\n    weight_ = data.weight\r\n    gender_ = data.gender\r\n    numEx = data.numberOfPreferedExercises\r\n    setLoaded(true)\r\n    };\r\n\r\n    \r\n\r\n\r\n    //Makes copies of user input and update account\r\n    const saveChanges = async ()=> {\r\n        let tempheight = 0;\r\n        tempheight = height.valueOf()\r\n        let tempweight = 0;\r\n        tempweight = weight.valueOf()\r\n        let tempexe = 0;\r\n        tempexe = numberofexe.valueOf()\r\n        await DataStore.save(\r\n            User.copyOf(currUser[0], updated => {\r\n            updated.height = Number(tempheight)\r\n            updated.weight = Number(tempweight)\r\n            updated.gender = gender;\r\n            updated.numberOfPreferedExercises =  Number(tempexe);\r\n\r\n            })\r\n        );\r\n    };\r\n\r\n    const signOut = ()=> {\r\n        Auth.signOut()\r\n\r\n    }\r\n    const GoToHomePage =  ()=> {\r\n        setLoaded(false)\r\n        navigation.navigate('Home');\r\n    }\r\n\r\n    if (loaded == true) {\r\n        return(\r\n            <ScrollView showsVerticalScrollIndicator={false}>\r\n            <View style={styles.root}>\r\n    \r\n                <Text style={[styles.title]}>{username_}'s Profile</Text>\r\n    \r\n                <Text style={[styles.text]}>Height (cm)</Text>\r\n                <CustomInput placeholder={height_} value={height} setValue={setHeight}/>\r\n    \r\n                <Text style={[styles.text]}>Weight (lb)</Text>\r\n                <CustomInput placeholder={weight_} value={weight} setValue={setWeight}/>\r\n    \r\n                <Text style={[styles.text]}>Gender</Text>\r\n                <CustomInput placeholder={gender_} value={gender} setValue={setGender}/>\r\n    \r\n                <Text style={[styles.text]}>Number of exercises per day</Text>\r\n                <CustomInput placeholder={numEx} value={numberofexe} setValue={setNumberOfExe}/>\r\n                \r\n                <CustomButton onPress={saveChanges} text=\"Save changes to profile\" />\r\n                <CustomButton onPress={GoToHomePage} text=\"Go To Homepage\" />\r\n                <CustomButton onPress={signOut} text=\"Sign Out\" bgColor=\"#E3242B\"/>\r\n    \r\n            </View>\r\n            </ScrollView>\r\n        )\r\n    }\r\n    return (\r\n        <View>\r\n            <Text>Loading...</Text>\r\n        </View>\r\n    )\r\n\r\n};\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    root:{\r\n        alignItems: 'center',\r\n        padding:20,\r\n    },\r\n    title: {\r\n        fontSize:24,\r\n        fontWeight:'bold',\r\n        color:'#051C60',\r\n        margin:10,\r\n    },\r\n    text:{\r\n        fontSize:14,\r\n        color:'gray',\r\n        marginVertical:10,\r\n        fontWeight:'bold',\r\n    },\r\n})\r\n\r\nexport default UserProfileScreen;"]},"metadata":{},"sourceType":"module"}